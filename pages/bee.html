<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bee Swarm Simulator Wordle</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-image: url('../assets/img/bee.jpg');
            background-size: cover;
            margin: 0;
        }

        .game-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
        }

        .guess-grid {
            display: grid;
            grid-template-rows: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .guess-row {
            display: flex;
            justify-content: center;
        }

        .guess-box {
            width: 50px;
            height: 50px;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            text-transform: capitalize;
            transition: background-color 0.5s, color 0.5s;
        }

        .correct {
            background-color: green;
            color: white;
        }

        .present {
            background-color: yellow;
            color: black;
        }

        .absent {
            background-color: lightgray;
            color: black;
        }

        #guess-input {
            width: 200px;
            height: 30px;
            font-size: 18px;
            text-align: center;
        }

        #guess-button, #restart-button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 18px;
        }

        #remaining-attempts {
            margin-top: 10px;
        }

        #hint {
            margin-top: 10px;
            font-size: 14px;
            color: gray;
        }

        #countdown {
            margin-top: 10px;
            font-size: 14px;
            color: gray;
        }

        @media (max-width: 600px) {
            .guess-box {
                width: 30px;
                height: 30px;
                font-size: 14px;
            }

            #guess-input {
                width: 150px;
                height: 25px;
                font-size: 14px;
            }

            #guess-button, #restart-button {
                padding: 8px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Bee Swarm Simulator Wordle</h1>
        <img id="bee-image" src="" alt="Bee Image" style="width: 100px; height: 100px; display: none;">
        <div id="guess-grid" class="guess-grid">
            <!-- Guess rows will be dynamically generated here -->
        </div>
        <input type="text" id="guess-input" maxlength="20" placeholder="Enter your guess">
        <button id="guess-button" disabled>Submit Guess</button>
        <div id="remaining-attempts">Attempts left: 6</div>
        <div id="hint"></div>
        <button id="restart-button" style="display:none;">Restart Game</button>
        <div id="countdown">Time until next bee: <span id="timer"></span></div>
    </div>
    <script>
        const bees = [
            "Basic", "Bomber", "Brave", "Bumble", "Cool",
            "Hasty", "Looker", "Rad", "Rascal", "Stubborn",
			"Bubble", "Bucko", "Commander", "Demo", "Exhausted",
			"Fire", "Frosty", "Honey", "Rage", "Riley", "Shocked",
			"Baby", "Carpenter", "Demon", "Diamond", "Lion", "Music",
			"Ninja", "Shy", "Buoyant", "Fuzzy", "Precise", "Spicy",
			"Tadpole", "Vector", "Bear", "Cobalt", "Crimson", "Digital",
			"Festive", "Gummy", "Photon", "Puppy", "Tabby", "Vicious", "Windy"
            // Add all the bee names here
        ];


        // Function to get the daily bee
        function getDailyBee() {
            const start = new Date(2024, 0, 1); // Start date (e.g., January 1, 2024)
            const now = new Date();
            const diff = Math.floor((now - start) / (1000 * 60 * 60 * 24));
            return bees[diff % bees.length].toLowerCase();
        }

        let answer = getDailyBee();
        let attempts = 6;
        const maxAttempts = attempts;

        document.getElementById('guess-input').addEventListener('input', () => {
            const guess = document.getElementById('guess-input').value.toLowerCase();
            const submitButton = document.getElementById('guess-button');
            submitButton.disabled = !(guess.length > 0 && bees.map(b => b.toLowerCase()).includes(guess));
        });

        document.getElementById('guess-input').addEventListener('keyup', (event) => {
            if (event.key === 'Enter' && !document.getElementById('guess-button').disabled) {
                submitGuess();
            }
        });

        document.getElementById('guess-button').addEventListener('click', submitGuess);
        document.getElementById('restart-button').addEventListener('click', restartGame);

        function submitGuess() {
            const guess = document.getElementById('guess-input').value.toLowerCase();
            checkGuess(guess);
            document.getElementById('guess-input').value = '';
            document.getElementById('guess-input').focus();
        }

        function checkGuess(guess) {
            const guessRow = document.createElement('div');
            guessRow.className = 'guess-row';
            const guessArray = guess.split('');
            const answerArray = answer.split('');
            guessArray.forEach((letter, index) => {
                const guessBox = document.createElement('div');
                guessBox.className = 'guess-box';
                guessBox.innerText = letter;
                if (answerArray[index] === letter) {
                    guessBox.classList.add('correct');
                } else if (answerArray.includes(letter)) {
                    guessBox.classList.add('present');
                } else {
                    guessBox.classList.add('absent');
                }
                guessRow.appendChild(guessBox);
            });
            document.getElementById('guess-grid').appendChild(guessRow);
            attempts--;
            document.getElementById('remaining-attempts').innerText = `Attempts left: ${attempts}`;
            if (guess === answer) {
                setTimeout(() => alert('Congratulations! You guessed the bee!'), 100);
                endGame();
                showBeeImage();
            } else if (attempts === 0) {
                setTimeout(() => alert(`Game Over! The bee was ${answer}`), 100);
                endGame();
                showBeeImage();
            } else if (attempts === Math.floor(maxAttempts / 2)) {
                document.getElementById('hint').innerText = 'Hint: Think of the most common bees!';
            }
        }

        function endGame() {
            document.getElementById('guess-button').disabled = true;
            document.getElementById('restart-button').style.display = 'block';
        }

        function restartGame() {
            answer = getDailyBee();
            attempts = maxAttempts;
            document.getElementById('guess-grid').innerHTML = '';
            document.getElementById('remaining-attempts').innerText = `Attempts left: ${attempts}`;
            document.getElementById('hint').innerText = '';
            document.getElementById('guess-button').disabled = true;
            document.getElementById('restart-button').style.display = 'none';
            document.getElementById('bee-image').style.display = 'none';
        }

        function showBeeImage() {
            const beeImage = document.getElementById('bee-image');
            beeImage.style.display = 'block';
            // Change the image source based on the answer
            beeImage.src = `/assets/img/bees/${answer.replace(/ /g, '_')}.png`;
        }

        // Add sound effects
        const correctSound = new Audio('../assets/sound/correct-sound.mp3');
        const incorrectSound = new Audio('../assets/sound/incorrect-sound.mp3');

        function playSound(isCorrect) {
            if (isCorrect) {
                correctSound.play();
            } else {
                incorrectSound.play();
            }
        }

        // Countdown Timer
        function updateCountdown() {
            const now = new Date();
            const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
            const timeRemaining = nextMidnight - now;

            const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);

            document.getElementById('timer').innerText = `${hours}h ${minutes}m ${seconds}s`;
        }

        // Update countdown every second
        setInterval(updateCountdown, 1000);

        // Initialize countdown
        updateCountdown();
    </script>
</body>
</html>
